import { Button } from 'antd'
import React, { useCallback } from 'react'

export const Downloads = () => {
    const handleClick = useCallback(async () => {
        const downloadId = await chrome.downloads.download({
            url: "https://i.kym-cdn.com/photos/images/newsfeed/001/494/940/930.jpg"
        })

        chrome.downloads.onChanged.addListener(
          (data) => {
            console.log(data)
            if (data.state.current === 'complete') { 
              chrome.downloads.open(downloadId)
            }
          }
        )

    }, [])

    return <>
        <Button type='primary' danger onClick={handleClick}>Just click me</Button>
    </>
}